/subscribe:
  post:
    summary: Subscribe to newsletter
    description: Allows a user to subscribe using their email address.
    tags: [Subscription]
    requestBody:
      required: true
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Subscribe'
    responses:
      200:
        description: Subscription successful
        content:
        application/json:
          schema:
            type: array
            items:
              $ref: '#/components/schemas/Subscriber'
      400:
        description: Invalid request or already subscribed
      500:
        description: Internal server error
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ErrorResponse'

/unsubscribe:
  get:
    summary: Unsubscribe from newsletter
    description: Unsubscribes a user using a secure token sent via email.
    tags: [Subscription]
    parameters:
      - in: query
        name: token
        required: true
        schema:
          type: string
        description: Unsubscribe token
    responses:
      200:
        description: Unsubscription successful
      400:
        description: Invalid or expired token
      500:
        description: Internal server error
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ErrorResponse'

/subscribers:
  get:
    summary: Get all subscribers
    description: Retrieves a list of all newsletter subscribers (admin only).
    tags: [Subscription]
    security:
      - bearerAuth: []
    responses:
      200:
        description: List of subscribers retrieved successfully
      401:
        description: Unauthorized
      500:
        description: Internal server error
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ErrorResponse'
